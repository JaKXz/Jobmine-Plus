<!doctype html>
<html>
    <head>
        <title>Jbmn+ App Local Testing</title>
        <script src='/jquery-1.8.2.min.js'></script>
        <style>
            * {
                font-family:Verdana, Arial;
                -moz-box-sizing:border-box;
                -webkit-box-sizing:border-box;
                -ms-box-sizing:border-box;
                -o-box-sizing:border-box;
                box-sizing:border-box;
                color:#444;
                user-select:none;
                -moz-user-select:none;
                -webkit-user-select:none;
                -ms-user-select:none;
                -o-user-select:none;
            }
            span.title {
                display:block;
                border-bottom:1px solid #CCC;
                margin: 10px;
                padding: 0 20px;
            }
            span.title a{
                font-family: Century Gothic, Verdana, Arial;
                font-size:20px;
                color: #777;
                text-decoration:none;
            }
            span.title a:hover {
                color:black;
            }
            label:hover {   
                color: #068BBF;
            }
            input {
                float:left;
                margin-right:20px;
            }
            ul li {
                list-style-type: none;
            }
        </style>
    </head>
    <body>
        <section class='applications'>
            <span class='title'><a href='/applications/' title='Preview in new tab' target='_blank'>Applications</a></span>
            <ul class='applications'>
                <li>
                    <label for='applications-none'>No Active/No All</label>
                    <input id='applications-none' name='applications' value='0' type='radio'/>
                </li>
                <li>
                    <label for='applications-no-active-not-employed'>No Active/Yes All (not employed)</label>
                    <input id='applications-no-active-not-employed' name='applications' value='1' type='radio'/>
                </li>
                <li>
                    <label for='applications-yes-employed'>Both Yes (employed)</label>
                    <input id='applications-yes-employed' name='applications' value='2' type='radio'/>
                </li>
                <li>
                    <label for='applications-yes-not-employed'>Both Yes (not employed)</label>
                    <input id='applications-yes-not-employed' name='applications' value='3' type='radio'/>
                </li>
            </ul>
        </section>
        <section class='interviews'>
            <span class='title'><a href='/interviews/' title='Preview in new tab' target='_blank'>Interviews</a></span>
            <ul class='interviews'>
                <li>
                    <label for='interviews-none'>No Interviews</label>
                    <input id='interviews-none' name='interviews' value='0' type='radio'/>
                </li>
                <li>
                    <label for='interviews-2jobs'>2 Jobs Shown</label>
                    <input id='interviews-2jobs' name='interviews' value='1' type='radio'/>
                </li>
                <li>
                    <label for='interviews-3jobs'>3 Jobs Shown</label>
                    <input id='interviews-3jobs' name='interviews' value='2' type='radio'/>
                </li>
            </ul>
        </section>
        <section class='shortlist'>
            <span class='title'><a href='/shortlist/' title='Preview in new tab' target='_blank'>Short List</a></span>
            <ul class='shortlist'>
                <li>
                    <label for='shortlist-normal'>Has shortlist data</label>
                    <input id='shortlist-normal' name='shortlist' value='0' type='radio'/>
                </li>
                <li>
                    <label for='shortlist-test'>Shortlist test data</label>
                    <input id='shortlist-test' name='shortlist' value='1' type='radio'/>
                </li>
            </ul>
        </section>
        <script>
            var urlChange = "/changePage/",
                urlGet = "/selected/";
            $("input").change(function(){    
                var o = $(this),
                    page = o.attr("name"),
                    value = o.val();
                switch(page) {
                    case "applications": 
                    case "shortlist": 
                    case "interviews":
                        $.ajax({
                            url: urlChange,
                            type: "POST",
                            dataType: "json",
                            cache: false,
                            data: {
                                page: page,
                                number: value
                            }, 
                            success: function(response){
                                if (!response || !response.success) {
                                    alert("Failed to get response");
                                }
                            }
                        });
                        break;
                }
            });
            // Retrieve the selected values from the server
            (function() {
                $.get(urlGet, function(response){
                    if (response && response.success && response.data) {
                        for (var page in response.data) {
                            var val = response.data[page];
                            $("section." + page + " input[value='" + val + "']")
                                .attr("checked", "checked").siblings().removeAttr("selected");
                        }
                    } else {
                        alert("Cannot get the selected values from the server");
                    }
                });
            })();
        </script>
    </body>
</html>
















